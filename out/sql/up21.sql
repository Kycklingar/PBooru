CREATE TABLE IF NOT EXISTS phash(
    post_id INTEGER NOT NULL UNIQUE REFERENCES posts(id),
    h1 UNSIGNED SMALLINT NOT NULL,
    h2 UNSIGNED SMALLINT NOT NULL,
    h3 UNSIGNED SMALLINT NOT NULL,
    h4 UNSIGNED SMALLINT NOT NULL
);

CREATE INDEX IF NOT EXISTS phash_h1_index ON phash(h1);
CREATE INDEX IF NOT EXISTS phash_h2_index ON phash(h2);
CREATE INDEX IF NOT EXISTS phash_h3_index ON phash(h3);
CREATE INDEX IF NOT EXISTS phash_h4_index ON phash(h4);