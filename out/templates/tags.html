{{ template "base" }}
<div>
	<form>
		<label for="tagsearch">Search</label>
		<input id="tagsearch" class="stinput" name="tag" type="text">
		<input value="Search" type="submit">
	</form>
</div>

<div id="content">
	<div class="box">
		<ul>
			{{ range .Tags }}
			<li class="tag namespace-{{.Namespace}}"><a href="/tags/{{$.CurrentPage}}/{{.ID}}{{$.Query}}">{{.}}</a></li>
			{{ end }}
		</ul>
	</div>
	<div class="box">
		{{if .Tag}}
			<h2>
				<span class="tag namespace-{{.Tag.Namespace}}">
					<a href="/tags/{{$.CurrentPage}}/{{.Tag.ID}}{{$.Query}}">{{.Tag}}</a>
				</span>
			</h2>
			{{with .From}}
			Aliased from:
			<ul>
				{{range .}}
				<li class="tag namespace-{{.Namespace}}">
					<a href="/tags/{{$.CurrentPage}}/{{.ID}}{{$.Query}}">{{.}}</a>
				</li>
				{{end}}
			</ul>
			{{end}}

			{{with .To}}
			Aliased to:
			<ul>
				<li class="tag namespace-{{.Namespace}}">
					<a href="/tags/{{$.CurrentPage}}/{{.ID}}{{$.Query}}">{{.}}</a>
				</li>
			</ul>
			{{end}}

			{{with .Parents}}
			Parents:
			<ul>
				{{range .}}
				<li class="tag namespace-{{.Namespace}}"><a href="/tags/{{$.CurrentPage}}/{{.ID}}{{$.Query}}">{{.}}</a></li>
				{{end}}
			</ul>
			{{end}}

			{{ with .Children}}
			Children:
			<ul>
				{{ range .}}
				<li class="tag namespace-{{.Namespace}}"><a href="/tags/{{$.CurrentPage}}/{{.ID}}{{$.Query}}">{{.}}</a></li>
				{{ end }}
			</ul>
			{{end}}

		{{end}}

		<hr>

		<div>
			<form method="POST">
				<input type="hidden" name="action" value="alias">
				{{with .Tag}}
				<input type="hidden" name="from" value="{{.Namespace}}:{{.Tag}}">
				{{else}}
				<p>Alias from</p>
				<input type="text" class="stinput" name="from">
				{{end}}
				<p>Alias to</p>
				<input type="text" class="stinput" name="to">
				<input type="submit">
			</form>
			<div class="divider"></div>
			<form method="POST">
				<input type="hidden" name="action" value="parent">
				{{with .Tag}}
				<input type="hidden" name="child" value="{{.Namespace}}:{{.Tag}}">
				{{else}}
				<p>Child</p>
				<input type="text" class="stinput" name="child">
				{{end}}
				<p>Parent</p>
				<input type="text" class="stinput" name="parent">
				<input type="submit">
			</form>
			{{if and .Tag .To}}
			<form method="POST">
				<p>Unalias</p>
				<input type="hidden" name="action" value="unalias">
				{{with .Tag}}
				<input type="hidden" name="from" value="{{.}}">
				{{else}}
				<input type="text" name="from">
				{{end}}
				<input type="submit">
			</form>
			{{end}}

			<script type="text/javascript" src="/static/suggestions.js"></script>
		</div>
	</div>
</div>

{{template "paginator" .Paginator}}
{{ template "baseEnd" }}
