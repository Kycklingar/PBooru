{{ define "userSettings" }}
<div class="box">
	<form action="/options" method="POST">
		<label>Ipfs Gateway<br>
			<input type="text" name="gateway" value="{{.Gateway}}">
		</label>
		<br>
		<label>Posts Per Page</br>
			<input type="text" name="limit" value="{{.Limit}}">
		</label>
		<br>
		<label>Thumbnail Size</br>
			<input type="text" name="thumbnail-size" value="{{.ThumbnailSize}}">
		</label>
		<br>
		<label>Thumbnail Image Size</br>
			<input type="text" name="real-thumbnail-size" title="0 clamps to thumbnail size" value="{{.RealThumbnailSize}}">
		</label>
		<br>
		<br>
		<label>Collect Alts
			<input type="checkbox" name="collect-alts" {{if .CollectAlts}}checked{{end}}>
		</label>
		<br>
		<div>
			<label>Thumbnail preview on hover
				<input type="checkbox" name="thumb-hover" {{if .ThumbHover}}checked{{end}}>
			</label>
			<br>
			<div>
				<label>â”” Previews use full image (js)
					<input type="checkbox" name="thumb-hover-full" {{if .ThumbHoverFull}}checked{{end}}>
				</label>
			</div>
		</div>
		<br>
		<br>
		<input type="submit">
	</form>

	{{if .ThumbHover}}
		{{if .ThumbHoverFull}}
		<script>
		var el = document.getElementsByClassName("thumbnail")
		for (var i = 0; i < el.length; i++)
		{
			let ph = el[i].getElementsByClassName("placeholder")[0]
			if(ph)
			{
				el[i].addEventListener("mouseover", function(e){thumbPreview(ph)}, false)
				el[i].addEventListener("mouseout", function(e){removeChildren(ph)}, false)
			}
		}

		function removeChildren(el){
			while(el.firstChild)
				el.removeChild(el.lastChild)
		}

		function thumbPreview(el)
		{
			var video = document.createElement("video")
			video.src = "{{.Gateway}}/ipfs/" + el.getAttribute("hash")
			video.className = "preview"
			video.autoplay = true
			video.loop = true
			el.appendChild(video)
		}
		</script>
		{{end}}
	{{end}}
</div>
{{end}}
