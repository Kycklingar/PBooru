{{ define "userSettings" }}
<div class="text-panel">
	<form action="/options" method="POST">
		<p>Ipfs Gateway</p>
		<input type="text" name="daemon" value="{{if .IpfsDaemon}}{{.IpfsDaemon}}{{end}}">
		<p>Post Limit</p>
		<input type="text" name="limit" value="{{if .Limit}}{{.Limit}}{{end}}">
		<p>Thumbnail Size</p>
		<input type="text" name="ImageSize" value="{{if .ImageSize}}{{.ImageSize}}{{end}}">
		<p>Minimum Thumbnail Image Size</p>
		<input type="text" name="MinThumbnailSize" title="0 clamps to thumbnail size" value="{{with .MinThumbnailSize}}{{.}}{{end}}">
		<br>
		<br>
		<label for="thumbhover">Thumbnail Preview Hover</label>
		<input type="checkbox" id="thumbhover" name="thumbhover" {{if .ThumbHover}}checked{{end}}>
		<br>
		<label for="thumbhoverfull">Previews Use Full Image (js)</label>
		<input type="checkbox" id="thumbhoverfull" name="thumbhoverfull" {{if .ThumbHoverFull}}checked{{end}}>
		<br>
		<br>
		<input type="submit">
	</form>

	{{if .ThumbHover}}
		{{if .ThumbHoverFull}}
		<script>
		var el = document.getElementsByClassName("thumbnail")
		for (var i = 0; i < el.length; i++)
		{
			let ph = el[i].getElementsByClassName("placeholder")[0]
			if(ph)
			{
				el[i].addEventListener("mouseover", function(e){thumbPreview(ph)}, false)
				el[i].addEventListener("mouseout", function(e){removeChildren(ph)}, false)
			}
		}

		function removeChildren(el){
			while(el.firstChild)
				el.removeChild(el.lastChild)
		}

		function thumbPreview(el)
		{
			var video = document.createElement("video")
			video.src = "{{.IpfsDaemon}}/ipfs/" + el.getAttribute("hash")
			video.className = "preview"
			video.autoplay = true
			video.loop = true
			el.appendChild(video)
		}
		</script>
		{{end}}
	{{end}}
</div>
{{end}}
